? q_test_routines.c3p
?
? This file is part of the c3P language compiler. This project
? is free software; you can redistribute it and/or modify it under
? the terms of the GNU General Public License
?
? This project is distributed in the hope that it will be useful,
? but WITHOUT ANY WARRANTY; without even the implied warranty of
? MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
? GNU General Public License for more details.
?
? You should have received a copy of the GNU General Public License
? If not, see <http://www.gnu.org/licenses/>.

? ---------------------------------------------
? Description
?	Test routines including recursive functions
?	such as fibonacci method
? ---------------------------------------------

proc show_error(message : str)
	call show "[ERROR] "
	call showln message
endproc

func sum_i32 : i32[](x : i32[], y : i32[])
	len1 : i32 = call arrlen x
	len2 : i32 = call arrlen y

	if (len1 == len2)
		result : i32[len1]

		for (i : i32 = 0, i = i + 1, i < len1)
			result[i] = x[i] + y[i]
		endfor

		ret result
	else
		call show_error "arrays must have same length"
		ret x
	endif
endfunc

func sun_i32 : i32[](x : i32[], y : i32[])
	len1 : i32 = call arrlen x
	len2 : i32 = call arrlen y

	if (len1 == len2)
		result : i32[len1]

		for (i : i32 = 0, i = i + 1, i < len1)
			result[i] = x[i] - y[i]
		endfor

		ret result
	else
		call show_error "arrays must have same length"
		ret x
	endif
endfunc

func fibonacci : i32(n : i32)
    if (n > 1)
        f1 : i32 = call fibonacci n - 1
        f2 : i32 = call fibonacci n - 2
        ret f1 + f2
    endif

    ret n
endfunc

proc main()
	len : i32 = 10
	x : i32[len]
	y : i32[len]

	z : i32[len] = call sum_i32 x y
	z = call sub_i32 x y

	l : i32 = call fibonacci 10
	call show "f(10)="
	call showln l
endproc
